<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Variance</title>

<script src="site_libs/header-attrs-2.23/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-6.4.0/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="css/styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="intro.html">Introduction</a>
</li>
<li>
  <a href="jour1.html">univariées</a>
</li>
<li>
  <a href="jour2.html">bivariées</a>
</li>
<li>
  <a href="jour3.html">khi 2</a>
</li>
<li>
  <a href="jour4.html">régression</a>
</li>
<li>
  <a href="jour5.html">examen</a>
</li>
<li>
  <a href="jour6.html">variance</a>
</li>
<li>
  <a href="jour7.html">multivariées</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/beababa/01_stat">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Variance</h1>

</div>


<div id="intro-rappels-divers" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Intro : rappels
divers</h1>
<div id="théorie" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Théorie</h2>
<ul>
<li><p>le khi2, la régression, et la variance</p></li>
<li><p>démarche générale</p></li>
</ul>
<p>Avec le khi2, on a vu surtout le test et sa significativité.</p>
<p>Avec la régression, on a abordé uniquement le coefficient de
corrélation sans montrer le test.</p>
<p>Avec la variance, nous allons aborder test, significativité et
intensité.</p>
</div>
<div id="outils" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Outils</h2>
<ul>
<li><p>xls ou csv</p></li>
<li><p>libre office ou R</p></li>
</ul>
</div>
</div>
<div id="donnée-et-objet-de-lexercice" class="section level1"
number="2">
<h1><span class="header-section-number">2</span> Donnée et objet de
l’exercice</h1>
<p>Suite à l’examen, on a 3 séries de données sous les iris (logement),
les carreaux (revenus), et les parcelles cadastrales (fonciers)</p>
<p>On va tester s’il y a une répartition spatiale spécifique des
éléments pour chacune de ces données.</p>
<p>Nous allons d’abord examiner les valeurs foncières.</p>
<p>Notre exemple reste Bondy.</p>
<p>La variance est en effet très souvent utilisée en géographie pour
tester des groupements spatiaux.</p>
<div id="hypothèse" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Hypothèse</h2>
<p>Nous allons étudier la relation entre une variable quantitative et
une donnée géographique .</p>
<p>R va nous permettre de mettre en place la donnée d’exemple.</p>
</div>
<div id="préparer-la-donnée" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Préparer la
donnée</h2>
<div id="que-faut-il-faire" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Que faut-il faire
?</h3>
<p>Lire les fichiers, notament celui où est Bondy, le 93 Extraire la
donnée quantitative la plus représentative Enregistrer ce rapport dans
un fichier</p>
</div>
<div id="remarques-sur-r" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Remarques sur
R</h3>
<ul>
<li><p>opérateur d’assignation</p></li>
<li><p>les accolades</p></li>
<li><p>la complétion avec tabulation</p></li>
</ul>
<p>Parcours du script et exercice moodle pour voir si c’est compris.</p>
</div>
<div id="le-script" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Le script</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># lecture du fichier. Quelle remarque faire ?</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>vf <span class="ot">&lt;-</span>  <span class="fu">read.csv2</span>(<span class="st">&quot;data/examen/vf/93_vfEXAMEN.csv&quot;</span>, <span class="at">fileEncoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># extraction de Bondy</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>vf_Bondy <span class="ot">&lt;-</span> vf [ vf<span class="sc">$</span>cog <span class="sc">==</span> <span class="st">&#39;93010&#39;</span>,]</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">str</span>(vf_Bondy)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    1901 obs. of  45 variables:
##  $ X                         : int  4308273 4308274 4308275 4308347 4308348 4308349 4308371 4308372 4309014 4309015 ...
##  $ cog                       : int  93010 93010 93010 93010 93010 93010 93010 93010 93010 93010 ...
##  $ Identifiant.de.document   : logi  NA NA NA NA NA NA ...
##  $ Reference.document        : logi  NA NA NA NA NA NA ...
##  $ X1.Articles.CGI           : logi  NA NA NA NA NA NA ...
##  $ X2.Articles.CGI           : logi  NA NA NA NA NA NA ...
##  $ X3.Articles.CGI           : logi  NA NA NA NA NA NA ...
##  $ X4.Articles.CGI           : logi  NA NA NA NA NA NA ...
##  $ X5.Articles.CGI           : logi  NA NA NA NA NA NA ...
##  $ No.disposition            : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ Date.mutation             : chr  &quot;03/01/2022&quot; &quot;03/01/2022&quot; &quot;03/01/2022&quot; &quot;12/01/2022&quot; ...
##  $ Nature.mutation           : chr  &quot;Vente&quot; &quot;Vente&quot; &quot;Vente&quot; &quot;Vente&quot; ...
##  $ Valeur.fonciere           : num  188000 188000 188000 135000 135000 ...
##  $ No.voie                   : int  139 139 139 2 2 2 90 90 11 11 ...
##  $ B.T.Q                     : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Type.de.voie              : chr  &quot;AV&quot; &quot;AV&quot; &quot;AV&quot; &quot;ALL&quot; ...
##  $ Code.voie                 : chr  &quot;1430&quot; &quot;1430&quot; &quot;1430&quot; &quot;0765&quot; ...
##  $ Voie                      : chr  &quot;CARNOT&quot; &quot;CARNOT&quot; &quot;CARNOT&quot; &quot;DES BOULEAUX&quot; ...
##  $ Code.postal               : int  93140 93140 93140 93140 93140 93140 93140 93140 93140 93140 ...
##  $ Commune                   : chr  &quot;BONDY&quot; &quot;BONDY&quot; &quot;BONDY&quot; &quot;BONDY&quot; ...
##  $ Code.departement          : int  93 93 93 93 93 93 93 93 93 93 ...
##  $ Code.commune              : int  10 10 10 10 10 10 10 10 10 10 ...
##  $ Prefixe.de.section        : logi  NA NA NA NA NA NA ...
##  $ Section                   : chr  &quot;AS&quot; &quot;AS&quot; &quot;AS&quot; &quot;A&quot; ...
##  $ No.plan                   : int  167 167 167 224 224 224 136 136 21 21 ...
##  $ No.Volume                 : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ X1er.lot                  : int  19 19 8 1158 1660 1158 28 19 NA NA ...
##  $ Surface.Carrez.du.1er.lot : num  NA NA NA 66.3 NA ...
##  $ X2eme.lot                 : int  26 26 NA 1160 NA 1160 NA NA NA NA ...
##  $ Surface.Carrez.du.2eme.lot: num  54.8 54.8 NA NA NA ...
##  $ X3eme.lot                 : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ Surface.Carrez.du.3eme.lot: num  NA NA NA NA NA NA NA NA NA NA ...
##  $ X4eme.lot                 : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ Surface.Carrez.du.4eme.lot: num  NA NA NA NA NA NA NA NA NA NA ...
##  $ X5eme.lot                 : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ Surface.Carrez.du.5eme.lot: logi  NA NA NA NA NA NA ...
##  $ Nombre.de.lots            : int  2 2 1 2 1 2 1 1 0 0 ...
##  $ Code.type.local           : int  2 3 3 3 3 2 3 2 2 2 ...
##  $ Type.local                : chr  &quot;Appartement&quot; &quot;Dépendance&quot; &quot;Dépendance&quot; &quot;Dépendance&quot; ...
##  $ Identifiant.local         : logi  NA NA NA NA NA NA ...
##  $ Surface.reelle.bati       : int  54 0 0 0 0 66 0 76 29 17 ...
##  $ Nombre.pieces.principales : int  3 0 0 0 0 4 0 4 2 1 ...
##  $ Nature.culture            : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Nature.culture.speciale   : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Surface.terrain           : int  NA NA NA NA NA NA NA NA 993 993 ...</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># on ne conserve que la valeur foncière</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>vf_Bondy <span class="ot">&lt;-</span> vf_Bondy [, <span class="fu">c</span>(<span class="st">&quot;Section&quot;</span>,<span class="st">&quot;Valeur.fonciere&quot;</span>)]</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co"># liste des sections</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">unique</span>(vf_Bondy<span class="sc">$</span>Section)</span></code></pre></div>
<pre><code>##  [1] &quot;AS&quot; &quot;A&quot;  &quot;AI&quot; &quot;V&quot;  &quot;M&quot;  &quot;AT&quot; &quot;Y&quot;  &quot;AG&quot; &quot;AX&quot; &quot;BE&quot; &quot;H&quot;  &quot;P&quot;  &quot;X&quot;  &quot;AN&quot; &quot;AZ&quot;
## [16] &quot;AY&quot; &quot;AO&quot; &quot;B&quot;  &quot;G&quot;  &quot;AK&quot; &quot;J&quot;  &quot;AE&quot; &quot;Q&quot;  &quot;AJ&quot; &quot;F&quot;  &quot;AV&quot; &quot;AD&quot; &quot;L&quot;  &quot;AR&quot; &quot;S&quot; 
## [31] &quot;BG&quot; &quot;AQ&quot; &quot;E&quot;  &quot;BF&quot; &quot;O&quot;  &quot;AH&quot; &quot;AL&quot; &quot;N&quot;  &quot;BD&quot; &quot;AC&quot; &quot;R&quot;  &quot;BH&quot; &quot;AP&quot; &quot;AU&quot; &quot;BC&quot;
## [46] &quot;AB&quot; &quot;AM&quot; &quot;D&quot;  &quot;U&quot;  &quot;Z&quot;  &quot;T&quot;  &quot;K&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># combien de valeurs foncières par section ?</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">table</span>(vf_Bondy<span class="sc">$</span>Section)</span></code></pre></div>
<pre><code>## 
##   A  AB  AC  AD  AE  AG  AH  AI  AJ  AK  AL  AM  AN  AO  AP  AQ  AR  AS  AT  AU 
##  72   1  17  35  49  10  42  37  64  24  14  11  33  13  11  33  31  34  78  38 
##  AV  AX  AY  AZ   B  BC  BD  BE  BF  BG  BH   D   E   F   G   H   J   K   L   M 
##  31  16   5  33 109   4   7   9  11  14   8   9   9  11  52 275  97   1  17  53 
##   N   O   P   Q   R   S   T   U   V   X   Y   Z 
##  13  14 304  41   1  21   8   5  13  17  45   1</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># inégale répartition des valeurs foncières</span></span></code></pre></div>
</div>
</div>
</div>
<div id="représentation-graphique" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Représentation
graphique</h1>
<p>La boite à moustaches permet de comparer rapidement des
distributions. Les moustaches montrent les 1ers et 9e déciles. Les
limites des boites correspondent au 1e et 3e quartile Le trait indique
la médiane. Les valeurs aberrantes sont les points isolés.</p>
<p>Il s’agit d’obtenir un graphique lisible, pour cela, on filtre la
donnée en fonction des graphiques obtenus.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">boxplot</span>(vf_Bondy<span class="sc">$</span>Valeur.fonciere<span class="sc">~</span>vf_Bondy<span class="sc">$</span>Section)</span></code></pre></div>
<p><img src="jour6_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Trop de sections, on va prendre uniquement les sections où il y a beaucoup de données.</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>ind <span class="ot">&lt;-</span> <span class="fu">which</span>((<span class="fu">table</span>(vf_Bondy<span class="sc">$</span>Section) <span class="sc">&gt;</span> <span class="dv">63</span>))</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>sectionSup63 <span class="ot">&lt;-</span> <span class="fu">names</span>(ind)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>vf_BondySup63 <span class="ot">&lt;-</span> vf_Bondy [vf_Bondy<span class="sc">$</span>Section <span class="sc">%in%</span> sectionSup63,]</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="fu">boxplot</span>(vf_BondySup63<span class="sc">$</span>Valeur.fonciere<span class="sc">~</span>vf_BondySup63<span class="sc">$</span>Section)</span></code></pre></div>
<p><img src="jour6_files/figure-html/unnamed-chunk-2-2.png" width="672" /></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># la section P et H  paraîssent des cas à part</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>vf_BondySup63_sansPH <span class="ot">&lt;-</span> vf_BondySup63 [<span class="sc">!</span>(vf_BondySup63<span class="sc">$</span>Section <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">&#39;P&#39;</span>,<span class="st">&#39;H&#39;</span>)),]</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="fu">boxplot</span>(vf_BondySup63_sansPH<span class="sc">$</span>Valeur.fonciere<span class="sc">~</span>vf_BondySup63_sansPH<span class="sc">$</span>Section)</span></code></pre></div>
<p><img src="jour6_files/figure-html/unnamed-chunk-2-3.png" width="672" /></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># avec quelques options pour faire plus joli</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co"># on décide de diviser la valeur foncière par 100 000 afin d&#39;avoir moins de zéros.</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>vf_BondySup63_sansPH<span class="sc">$</span>Valeur.fonciere <span class="ot">&lt;-</span> vf_BondySup63_sansPH<span class="sc">$</span>Valeur.fonciere <span class="sc">/</span> <span class="dv">100000</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="fu">boxplot</span>(vf_BondySup63_sansPH<span class="sc">$</span>Valeur.fonciere<span class="sc">~</span>vf_BondySup63_sansPH<span class="sc">$</span>Section, <span class="at">xlab =</span><span class="st">&quot;Section&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;montant valeur foncière (centaines de milliers)&quot;</span>,</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>        <span class="at">col=</span><span class="fu">rainbow</span>(<span class="dv">8</span>))</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co"># Affichage des moyennes sur les boites à moustache</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>moyenne <span class="ot">&lt;-</span> <span class="fu">tapply</span>(vf_BondySup63_sansPH<span class="sc">$</span>Valeur.fonciere, vf_BondySup63_sansPH<span class="sc">$</span>Section, mean)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="fu">points</span>(moyenne, <span class="at">pch =</span> <span class="dv">8</span>,  <span class="at">col=</span><span class="st">&quot;black&quot;</span>, <span class="at">cex =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="jour6_files/figure-html/unnamed-chunk-2-4.png" width="672" /></p>
<p>Ce graphique permet de comparer 5 sections. Les variations entre les
groupes sont-elles plus importantes que les variations au sein des
groupes eux-mêmes ? A priori, dans les sections AT et AJ, l’amplitude
est très étendue et la distribution est très asymétrique (la médiane est
quasiment au plancher de la boite). Beaucoup de petites ventes, et
quelques grosses ventes entre 50 M et 150 000. Les sections A, AJ et B
ont une distribution symétrique et une amplitude beaucoup plus
faible.</p>
<p>Il existe une valeur aberrante dans la section AT</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">hist</span>(vf_BondySup63_sansPH<span class="sc">$</span>Valeur.fonciere [vf_BondySup63_sansPH<span class="sc">$</span>Section <span class="sc">==</span> <span class="st">&quot;AT&quot;</span>],</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Distribution montant valeur foncière section AT&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;montant (centaines de milliers)&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;effectif&quot;</span>)</span></code></pre></div>
<p><img src="jour6_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>La section AT a une très grosse vente.</p>
</div>
<div id="la-variance" class="section level1" number="4">
<h1><span class="header-section-number">4</span> La variance</h1>
<div id="rappel" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Rappel</h2>
<p>Pour mémoire, la variance est le carré de la moyenne des écarts à la
moyenne.</p>
<p>Dans le tableur, nous aurions fait une série de tableaux de calcul
autour des écarts à la moyennes (en mettant des carrés). Dans r, c’est
une formule var.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">var</span>(vf_BondySup63_sansPH<span class="sc">$</span>Valeur.fonciere)</span></code></pre></div>
<pre><code>## [1] 25.05244</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Variance pour chaque zone, on utilise un tapply</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">tapply</span>(vf_BondySup63_sansPH<span class="sc">$</span>Valeur.fonciere, vf_BondySup63_sansPH<span class="sc">$</span>Section,var)</span></code></pre></div>
<pre><code>##          A         AJ         AT          B          J 
##  0.3905172  1.3616794 69.7387307  0.3664222 28.8179806</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># verif pour la section AT</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>sel <span class="ot">&lt;-</span>  vf_Bondy[vf_Bondy <span class="sc">==</span> <span class="st">&#39;AT&#39;</span>,<span class="fu">c</span>(<span class="st">&quot;Section&quot;</span>, <span class="st">&quot;Valeur.fonciere&quot;</span>)]</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>sel<span class="sc">$</span>Valeur.fonciere <span class="ot">&lt;-</span> sel<span class="sc">$</span>Valeur.fonciere <span class="sc">/</span><span class="dv">100000</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="fu">mean</span>((sel<span class="sc">$</span>Valeur.fonciere <span class="sc">-</span> <span class="fu">mean</span>(sel<span class="sc">$</span>Valeur.fonciere))<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 68.84464</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">var</span>(sel<span class="sc">$</span>Valeur.fonciere)</span></code></pre></div>
<pre><code>## [1] 69.73873</code></pre>
<p>Le résultat est légèrement différent, car le logiciel pondère la
variance en soustrayant 1 à l’effectif. Plus la série est grande, moins
cela a d’importance.</p>
</div>
<div id="analyse-de-la-variance" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Analyse de la
variance</h2>
<p>La variance est une quantité qui se décompose en :</p>
<ul>
<li><p>les variations à l’intérieur de chaque groupe (variation intra
groupe)</p></li>
<li><p>les variations entre les groupes (variation inter
groupe)</p></li>
</ul>
<p>La variation totale est la somme des deux. La significativité et
l’intensité sont calculées avec ces trois grandeurs.</p>
<p>significativité = rapport inter / intra</p>
<p>intensité = rapport inter / total</p>
<div id="la-formule-anova-dans-r" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> La formule ANOVA
dans R</h3>
<p>ANalyse Ordinaire de la VAriance</p>
<p>Sous R, il suffit de lancer une formule.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co"># on renomme la donnée avec un nom plus simple et on divise par 100000</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> vf_BondySup63_sansPH</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="co"># transformation en variable de catégorie</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>data<span class="sc">$</span>Section <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(data<span class="sc">$</span>Section)</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>modele <span class="ot">&lt;-</span> <span class="fu">lm</span> (Valeur.fonciere <span class="sc">~</span> Section, <span class="at">data =</span> data)</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="fu">anova</span>(modele)</span></code></pre></div>
<pre><code>## Analysis of Variance Table
## 
## Response: Valeur.fonciere
##            Df Sum Sq Mean Sq F value    Pr(&gt;F)    
## Section     4 2207.5  551.87  27.628 &lt; 2.2e-16 ***
## Residuals 415 8289.5   19.97                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>Sum Sq = la somme des carrés des écarts (SCE)</p>
<p>Mean Sq = la moyenne des carrés des écarts, c’est la variance.</p>
<p>La première ligne c’est pour la variation inter-groupe , la deuxième
c’est pour l’intérieur des groupes (l’intra)</p>
<p>Que dire ce ces chiffres ?</p>
<p>Comme pour le khi2, on peut faire un test et calculer
l’intensité.</p>
</div>
<div id="significativité" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span>
Significativité</h3>
<p>F value = Test de Fisher, c’est le test de significativité pour la
variance.</p>
<p>Le test est mesuré par le rapport entre la variation intergroupe et
la variation intragroupe (avec les degrés de liberté).</p>
<p>Si ce rapport est élevé, cela signifie que la variation intergroupe
est importante relativement à la variation intra, donc qu’il y a une
vraie différence entre les écarts à la moyenne des groupes.</p>
<p>Concernant les degré de liberté pour les données intra, on prend tous
les effectifs et on enlève le nombre de sections (cf les 2 chiffres
df)</p>
<p>ICi 420 - 5, df1 = 4, df2 = 415</p>
<div id="comme-pour-le-khi2-observé-et-théorique" class="section level4"
number="4.2.2.1">
<h4><span class="header-section-number">4.2.2.1</span> Comme pour le
khi2, observé et théorique</h4>
<p>Comme pour le khi2, on compare à un test obtenu par le hasard (donc
une table).</p>
<p><img src="img/fisher.jpg" /> F calculé</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>Ftable <span class="ot">&lt;-</span> <span class="fu">qf</span>(<span class="at">p=</span>.<span class="dv">05</span>, <span class="at">df1=</span><span class="dv">4</span>, <span class="at">df2=</span><span class="dv">415</span>, <span class="at">lower.tail=</span><span class="cn">FALSE</span>)</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>Fcalcule <span class="ot">&lt;-</span> <span class="dv">551</span> <span class="sc">/</span> <span class="dv">20</span></span></code></pre></div>
<p>Le F théorique est inférieur au F calculé pour un risque de 5 %</p>
<p>Il n’y a donc pas indépendance entre les sections et la distribution
du montant de la valeur foncière.</p>
</div>
</div>
<div id="avec-r-importance-de-la-p-value" class="section level3"
number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Avec R, importance
de la p-value</h3>
<p>Le chiffre le plus rapide à analyser, c’est la p-value, il indique la
taille de la différence entre les moyennes des 5 sections.</p>
<p>Plus il est petit, plus il y a de différence, plus il est gros, plus
les écarts aux moyennes se ressemblent et donc l’hypothèse
d’indépendance peut être rejetée.</p>
<p>C’est la même logique que pour le khi2 (cf exemple khi2 dans
l’introduction aux bivariées).</p>
<p>Dans notre cas, la pvalue indique un risque très faible Concrètement,
il faudrait aller chercher la table du risque à % de Fisher.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">qf</span>(<span class="at">p=</span><span class="fl">2.2e-16</span>, <span class="at">df1=</span><span class="dv">4</span>, <span class="at">df2=</span><span class="dv">415</span>, <span class="at">lower.tail=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] 21.85585</code></pre>
<p>On a très peu chances de se tromper si on rejette l’indépendance, il
faut donc la rejeter.</p>
<p>Les 5 sections correspondent à une répartition spécifique du montant
de la valeur foncière.</p>
</div>
<div id="intensité" class="section level3" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Intensité</h3>
<p>On mesure quand même l’intensité, la proportion de la variation
expliquée par les modalités dans la variation totale (entre 0 et 1)</p>
<p>variation intergroupe / variation totale</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="dv">551</span><span class="sc">/</span>(<span class="dv">551</span> <span class="sc">+</span> <span class="dv">20</span>)</span></code></pre></div>
<pre><code>## [1] 0.9649737</code></pre>
<p>L’intensité est forte, plus de 96 % de la variation est expliquée par
la structure spatiale.</p>
</div>
</div>
</div>
<div id="exercice-dapplication" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Exercice
d’application</h1>
<div id="hypothèse-1" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Hypothèse</h2>
<p>Il s’agit d’observer s’il y a une variation entre les groupes en
terme de notation. L’hypothèse est que le groupe 2 aura des meilleurs
notes car le cours du groupe 1 sert de brouillon, et le groupe 3
digère.</p>
</div>
<div id="script" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Script</h2>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>note <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/noteDSTsimplifie.csv&quot;</span>, <span class="at">fileEncoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="fu">summary</span>(note<span class="sc">$</span>note)</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="fu">boxplot</span>(note<span class="sc">$</span>note<span class="sc">~</span>note<span class="sc">$</span>groupe)</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>modele <span class="ot">&lt;-</span> <span class="fu">lm</span> (note <span class="sc">~</span> groupe, <span class="at">data =</span> note)</span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="fu">anova</span>(modele)</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a><span class="dv">45</span><span class="sc">/</span> (<span class="dv">45</span> <span class="sc">+</span><span class="dv">15</span>)</span></code></pre></div>
</div>
<div id="commentaires-année-2022" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Commentaires (année
2022)</h2>
<div id="boite-à-moustaches" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Boite à
moustaches</h3>
<p>Il existe des différences entre les groupes, la variation des notes
au sein de chaque groupe est différente. Seul le 3e groupe a une
distribution symétrique.</p>
<p>Le premier groupe a des notes de faible amplitudes mais avec 3 notes
très fortes. Et le 2e groupe a beaucoup de notes basses.</p>
<p>La variance entre les groupes risque donc d’être plus importante que
la variance intragroupe.</p>
</div>
<div id="pvalue" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Pvalue</h3>
<p>Le chiffre de la p-value (0.039) est bas. Donc la relation est
significative. H0 est rejetée avec un risque de 4 %.</p>
</div>
<div id="intensité-1" class="section level3" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Intensité</h3>
<p>L’intensité est forte, plus de 75 % de la variation est expliquée par
la structure en groupe.</p>
</div>
</div>
</div>

<br><br><br><br><br><br><br><br><br><br><br><br>
<small><p>L5GEABIM Analyses bivariées et multivariées</p></small>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
